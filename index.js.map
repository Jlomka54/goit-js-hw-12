{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\n\nexport const fetchPhotos = (searchedQuery, page) => {\n    const axiosOptions = {\n        params: {\n            q: searchedQuery,\n            per_page: 15,\n            page: page,\n        image_type: 'photo',\n        orientation: 'horizontal',\n            safesearch: true,\n        key: '45535880-f63e8525243c88ed6c06e2baa',\n    }\n}\n\n    //    return fetch(`${BASE_URL}?key=45535880-f63e8525243c88ed6c06e2baa&${urlParams}`)\n\n\n       return axios.get(``, axiosOptions)\n };\n","export const createGalerryCard = imgInfo => {\n    return `<li class=\"galerry-item\">\n    <a href=\"${imgInfo.largeImageURL}\" ><img class=\"gallery-item-img\" alt='${imgInfo.tags}' src='${imgInfo.webformatURL}'></img></a>\n     <ul class=\"photo-info-list\">\n    <li class=\"photo-info-item\">\n        <h4>Likes</h4>\n        <p class=\"photo-paragraph\">${imgInfo.likes}</p>\n</li>\n    <li class=\"photo-info-item\">\n         <h4>Views</h4>\n        <p class=\"photo-paragraph\">${imgInfo.views}</p>\n    </li>\n    <li class=\"photo-info-item\">\n         <h4>Commenst</h4>\n        <p class=\"photo-paragraph\">${imgInfo.comments}</p>\n    </li>\n    <li class=\"photo-info-item\">\n        <h4>Downloads</h4>\n        <p class=\"photo-paragraph\">${imgInfo.downloads}</p>\n</li>\n</ul> \n</li>`\n}\n","    import { fetchPhotos } from './js/pixabay-api.js';\nimport { createGalerryCard } from './js/render-function.js';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from \"simplelightbox\";\n\n\n\nconst formEl = document.querySelector('.search-form');\nconst galleryList = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader-js');\nconst loadMoreBT = document.querySelector('.load-more-bt');\n\nlet currentPage = 1;\nlet searchValue = '';\n\nconst galleryLightbox = new SimpleLightbox('.gallery-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n\nconst onSearchPhotos = async event => {\n    try {\n\n         event.preventDefault();\n        searchValue = formEl.elements.search.value;\n        \n        currentPage = 1;\n\n\n        galleryList.innerHTML = '';\n        const { data } = await fetchPhotos(searchValue, currentPage);\n        \n\n\n\n        if (searchValue.trim() === '') {\n    iziToast.error({\n    message: 'Search value',\n    });\n \n                return;\n            }\n            loader.classList.add('loader');\n\n            if (data.hits.length === 0) {\n                iziToast.warning({\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n                });\n\n                galleryList.innerHTML = '';\n                formEl.reset();\nloader.classList.remove('loader')\n                return;\n            }\n\n        const galleryCardsTemplate = data.hits.map(photoInfo => createGalerryCard(photoInfo)).join('');\n            loader.classList.remove('loader');\n            galleryList.innerHTML = galleryCardsTemplate;\n            galleryLightbox.refresh();\n \n        loadMoreBT.classList.remove('is-hidden')\n\n                if (data.total <= 15) {\n            loadMoreBT.classList.add('is-hidden');\n}\n        \n    } catch (error) {\n        iziToast.error({\n    message: `${error}`,\n                }); \n        \n    }\n};\n\nconst onLoadMorePhotos = async e => {\n    try {\n        currentPage++;\n\n        const { data } = await fetchPhotos(searchValue, currentPage);\n        \n        const galleryCardsTemplate = data.hits.map(photoInfo => createGalerryCard(photoInfo)).join('');\n\n            galleryList.insertAdjacentHTML('beforeend', galleryCardsTemplate)\n     \n        if (currentPage === Math.ceil(data.total / 15)) {\n            loadMoreBT.classList.add('is-hidden');\n            iziToast.info({\n           position:'topRight',\n    message: \"We're sorry, but you've reached the end of search results.\",\n            }); \n            \n\n            \n        }\n        galleryScrol();\n        \n    } catch (error) {\n        iziToast.error({\n    message: `${error}`,\n                }); \n    }\n };\n\nconst galleryScrol = () => {\n    const sizeCard = galleryList.firstElementChild;\n const {height} = sizeCard.getBoundingClientRect()\n\n    window.scrollBy({\n        top: height * 2,\n        behavior:'smooth'\n    });\n\n}\n\n\nformEl.addEventListener('submit', onSearchPhotos);\nloadMoreBT.addEventListener('click', onLoadMorePhotos);"],"names":["axios","fetchPhotos","searchedQuery","page","axiosOptions","createGalerryCard","imgInfo","formEl","galleryList","loader","loadMoreBT","currentPage","searchValue","galleryLightbox","SimpleLightbox","onSearchPhotos","event","data","iziToast","galleryCardsTemplate","photoInfo","error","onLoadMorePhotos","e","galleryScrol","sizeCard","height"],"mappings":"+vBACAA,EAAM,SAAS,QAAU,2BAGlB,MAAMC,EAAc,CAACC,EAAeC,IAAS,CAChD,MAAMC,EAAe,CACjB,OAAQ,CACJ,EAAGF,EACH,SAAU,GACV,KAAMC,EACV,WAAY,QACZ,YAAa,aACT,WAAY,GAChB,IAAK,oCACR,CACL,EAKO,OAAOH,EAAM,IAAI,GAAII,CAAY,CACtC,ECrBWC,EAAoBC,GACtB;AAAA,eACIA,EAAQ,aAAa,yCAAyCA,EAAQ,IAAI,UAAUA,EAAQ,YAAY;AAAA;AAAA;AAAA;AAAA,qCAIlFA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,qCAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,qCAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,qCAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA,OCXhDC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAa,SAAS,cAAc,eAAe,EAEzD,IAAIC,EAAc,EACdC,EAAc,GAElB,MAAMC,EAAkB,IAAIC,EAAe,kBAAmB,CAC5D,aAAc,MACd,aAAc,GAChB,CAAC,EAGKC,EAAiB,MAAMC,GAAS,CAClC,GAAI,CAECA,EAAM,eAAc,EACrBJ,EAAcL,EAAO,SAAS,OAAO,MAErCI,EAAc,EAGdH,EAAY,UAAY,GACxB,KAAM,CAAE,KAAAS,CAAI,EAAK,MAAMhB,EAAYW,EAAaD,CAAW,EAK3D,GAAIC,EAAY,KAAM,IAAK,GAAI,CACnCM,EAAS,MAAM,CACf,QAAS,cACb,CAAK,EAEW,MACH,CAGD,GAFAT,EAAO,UAAU,IAAI,QAAQ,EAEzBQ,EAAK,KAAK,SAAW,EAAG,CACxBC,EAAS,QAAQ,CAC7B,QAAS,0EACb,CAAiB,EAEDV,EAAY,UAAY,GACxBD,EAAO,MAAK,EAC5BE,EAAO,UAAU,OAAO,QAAQ,EAChB,MACH,CAEL,MAAMU,EAAuBF,EAAK,KAAK,IAAIG,GAAaf,EAAkBe,CAAS,CAAC,EAAE,KAAK,EAAE,EACzFX,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAY,UAAYW,EACxBN,EAAgB,QAAO,EAE3BH,EAAW,UAAU,OAAO,WAAW,EAE3BO,EAAK,OAAS,IACtBP,EAAW,UAAU,IAAI,WAAW,CAG3C,OAAQW,EAAO,CACZH,EAAS,MAAM,CACnB,QAAS,GAAGG,CAAK,EACrB,CAAiB,CAEZ,CACL,EAEMC,EAAmB,MAAMC,GAAK,CAChC,GAAI,CACAZ,IAEA,KAAM,CAAE,KAAAM,CAAI,EAAK,MAAMhB,EAAYW,EAAaD,CAAW,EAErDQ,EAAuBF,EAAK,KAAK,IAAIG,GAAaf,EAAkBe,CAAS,CAAC,EAAE,KAAK,EAAE,EAEzFZ,EAAY,mBAAmB,YAAaW,CAAoB,EAEhER,IAAgB,KAAK,KAAKM,EAAK,MAAQ,EAAE,IACzCP,EAAW,UAAU,IAAI,WAAW,EACpCQ,EAAS,KAAK,CACf,SAAS,WAChB,QAAS,4DACb,CAAa,GAKLM,GAEH,OAAQH,EAAO,CACZH,EAAS,MAAM,CACnB,QAAS,GAAGG,CAAK,EACrB,CAAiB,CACZ,CACL,EAEMG,EAAe,IAAM,CACvB,MAAMC,EAAWjB,EAAY,kBAC1B,CAAC,OAAAkB,CAAM,EAAID,EAAS,sBAAuB,EAE9C,OAAO,SAAS,CACZ,IAAKC,EAAS,EACd,SAAS,QACjB,CAAK,CAEL,EAGAnB,EAAO,iBAAiB,SAAUQ,CAAc,EAChDL,EAAW,iBAAiB,QAASY,CAAgB"}